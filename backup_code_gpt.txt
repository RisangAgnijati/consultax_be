// const express = require("express");
// const OpenAI = require("openai");
// const dotenv = require("dotenv");

// dotenv.config();
// const app = express();
// app.use(express.json());

// // Inisialisasi client
// const openai = new OpenAI({
//   apiKey: process.env.OPENAI_API_KEY,
// });

// // Endpoint
// app.post("/chat", async (req, res) => {
//   const { userMessage } = req.body;

//   try {
//     const response = await openai.chat.completions.create({
//       model: "gpt-4o-mini",
//       reasoning: { effort: "low" },
//       input: [
//         { role: "system", content: "Kamu adalah asisten singkat dan hemat token." },
//         { role: "user", content: userMessage }
//       ],
//       max_tokens: 50,          
//       temperature: 0.5,         
//       presence_penalty: 0,      
//       frequency_penalty: 0,
//     });

//     res.json({
//       reply: response.choices[0].message.content,
//       usage: response.usage, // tampilkan berapa token yang dipakai
//     });
//   } catch (error) {
//     console.error("Error:", error);
//     const status = error.status || 500;

//     if (status === 429) {
//       return res.status(429).json({
//         error:error,
//       });
//     }

//     res.status(status).json({ error: error.message });
//   }
// });

// const PORT = process.env.PORT || 9001;
// app.listen(PORT, () => console.log(`Server running on http://localhost:${PORT}`));
